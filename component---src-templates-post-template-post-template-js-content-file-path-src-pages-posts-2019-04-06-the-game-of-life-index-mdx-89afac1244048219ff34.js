"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[915],{5086:function(e,n,t){t.r(n),t.d(n,{default:function(){return u}});var r=t(1151),a=t(7294),i=t(4578),o=t(982),l=t(9417),c="style-module--control--14a5d";let s=function(e){function n(n){var t;return(t=e.call(this,n)||this).state={color1:"#00ff00",color2:"#000000",running:!1},t.color1ChangeHandler=e=>{t.setState({color1:e.target.value})},t.color2ChangeHandler=e=>{t.setState({color2:e.target.value})},t.startClickHandler=()=>{t.state.running?(cancelAnimationFrame(t.requestId),t.requestId=void 0,t.setState({running:!1})):(t.setState({running:!0}),t.requestId=requestAnimationFrame(t.gameLoop))},t.gameLoop=()=>{null!==t.canvas.current&&(t.arr=t.iterate(t.arr),t.printToCanvas(t.arr,t.cellSize,t.canvas.current),t.requestId=requestAnimationFrame(t.gameLoop))},t.acornClickHandler=()=>{t.arr=t.create2Darray(t.N,t.N,t.DEAD),t.initialiseAcorn(t.arr),t.printToCanvas(t.arr,t.cellSize,t.canvas.current)},t.crossClickHandler=()=>{t.arr=t.create2Darray(t.N,t.N,t.DEAD),t.initialiseCross(t.arr),t.printToCanvas(t.arr,t.cellSize,t.canvas.current)},t.ALIVE=1,t.DEAD=0,t.N=200,t.cellSize=3,t.neighbourhood=[[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1],[1,-1]],t.arr=t.create2Darray(t.N,t.N,t.DEAD),t.canvas=a.createRef(),t}(0,i.Z)(n,e);var t=n.prototype;return t.componentDidMount=function(){const e=this.canvas.current;e.width=this.arr.length*this.cellSize,e.height=this.arr[0].length*this.cellSize,this.initialiseAcorn(this.arr),this.printToCanvas(this.arr,this.cellSize,e)},t.render=function(){return a.createElement("div",{className:"style-module--container--b0d11"},a.createElement("canvas",{ref:this.canvas}),a.createElement("div",{className:"style-module--controls--8241a"},a.createElement("input",{className:c,type:"color",value:this.state.color1,onChange:this.color1ChangeHandler}),a.createElement("input",{className:c,type:"color",value:this.state.color2,onChange:this.color2ChangeHandler}),a.createElement("button",{className:c,onClick:this.startClickHandler},this.state.running?a.createElement(o.G,{icon:l.XQY}):a.createElement(o.G,{icon:l.zc})),a.createElement("button",{className:c,onClick:this.crossClickHandler},"Cross"),a.createElement("button",{className:c,onClick:this.acornClickHandler},"Acorn")))},t.iterate=function(e){const n=this.clone2Darray(e);for(let t=0;t<e.length;t++)for(let r=0;r<e[0].length;r++){const a=this.getneighcount(e,t,r);e[t][r]===this.ALIVE?a<2?n[t][r]=this.DEAD:2===a||3===a?n[t][r]=this.ALIVE:a>3&&(n[t][r]=this.DEAD):e[t][r]===this.DEAD&&3===a&&(n[t][r]=this.ALIVE)}return n},t.getneighcount=function(e,n,t){let r=0;for(let a=0;a<this.neighbourhood.length;a++){const i=this.neighbourhood[a][0],o=this.neighbourhood[a][1];e[this.pbcz(n+i,e.length)][this.pbcz(t+o,e[n].length)]===this.ALIVE&&r++}return r},t.pbcz=function(e,n){return e>=n&&(e-=n),e<0&&(e+=n),e},t.printToCanvas=function(e,n,t){const r=t.getContext("2d"),a=r.getImageData(0,0,t.width,t.height),i=a.data,o=this.hexToRgb(this.state.color1),l=this.hexToRgb(this.state.color2);for(let c=0;c<e.length;c++)for(let t=0;t<e[0].length;t++){const r=e[c][t]===this.ALIVE;for(let a=0;a<n;a++)for(let s=0;s<n;s++){const h=4*(c*n+a+(t*n+s)*e.length*n);i[h+0]=r?o.r:l.r,i[h+1]=r?o.g:l.g,i[h+2]=r?o.b:l.b,i[h+3]=255}}r.putImageData(a,0,0)},t.hexToRgb=function(e){const n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null},t.initialiseAcorn=function(e){const n=Math.round(e.length/2),t=Math.round(e[0].length/2),r=[[0,0],[-3,-1],[-2,-1],[-2,1],[1,-1],[2,-1],[3,-1]];for(let a=0;a<r.length;a++){const i=r[a][0],o=r[a][1];e[n+i][t+o]=this.ALIVE}},t.initialiseCross=function(e){const n=e.length,t=e[0].length;for(let r=0;r<n;r++){const n=r;n>=0&&n<t&&(e[r][n]=this.ALIVE)}for(let r=n-1;r>=0;r--){const n=t-(r+1);n>=0&&n<t&&(e[r][n]=this.ALIVE)}},t.clone2Darray=function(e){return e.map((e=>e.slice(0)))},t.create2Darray=function(e,n,t){const r=[];for(let a=0;a<e;a++)r[a]=[];for(let a=0;a<e;a++)for(let e=0;e<n;e++)r[a][e]=t;return r},n}(a.Component);function h(e){const n=Object.assign({p:"p",em:"em",ul:"ul",li:"li",pre:"pre",code:"code"},(0,r.ah)(),e.components);return a.createElement(a.Fragment,null,a.createElement(n.p,null,"The ",a.createElement("a",{class:"blueLink",href:"https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life"},"Game of Life")," is a ",a.createElement("a",{class:"blueLink",href:"https://en.wikipedia.org/wiki/Cellular_automaton"},"cellular automataton")," designed by the British mathematician ",a.createElement("a",{class:"blueLink",href:"https://en.wikipedia.org/wiki/John_Horton_Conway"},"John Conway"),'. A cellular automataton is a mathematical model that consists of a grid of cells, with each cell having an finite number of states (e.g "on" or "off"). A new grid configuration (a new ',a.createElement(n.em,null,"generation"),") is created according to a fixed set of rules that determine the state of each cell based on its current state and the state of the cells around it (its ",a.createElement(n.em,null,"neighbourhood"),"). Cellular automata can be used to simulate a variety of real-world systems, from the ",a.createElement("a",{class:"blueLink",href:"https://en.wikipedia.org/wiki/Belousov%E2%80%93Zhabotinsky_reaction"},"Belousovâ€“Zhabotinsky reaction")," to ",a.createElement("a",{class:"blueLink",href:"https://blogs.msdn.microsoft.com/calvin_hsia/2014/09/30/fish-vs-sharks-predator-prey-simulation/"},"predator prey relationships"),"."),"\n",a.createElement(n.p,null,"In Conway's Game of Life, the grid is a 2D array of square cells each with two states ",a.createElement(n.em,null,"alive")," and ",a.createElement(n.em,null,"dead"),". Each cell interacts with its 8 neighbours, which are the cells that are horizontally, vertically, or diagonally adjacent to it. The rules are:"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"Any live cell with fewer than two live neighbours dies, as if by underpopulation."),"\n",a.createElement(n.li,null,"Any live cell with two or three live neighbours lives on to the next generation."),"\n",a.createElement(n.li,null,"Any live cell with more than three live neighbours dies, as if by overpopulation."),"\n",a.createElement(n.li,null,"Any dead cell with exactly three live neighbours becomes a live cell, as if by reproduction."),"\n"),"\n",a.createElement(n.p,null,"We can get the number of alive neighbours of a cell in 2D array with the code below. Note we are applying ",a.createElement("a",{href:"https://en.wikipedia.org/wiki/Periodic_boundary_conditions",class:"blueLink"},"periodic boundary conditions")," in both the x and y directions."),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-javascript"},"var ALIVE = 1;\r\nvar DEAD = 0;\r\nvar N = 200;\r\nvar arr = create2Darray(N, N, DEAD); // Iitialises a new 2D array with array values set to 0.\r\nvar neighbourhood = [\r\n  [1, 0],\r\n  [1, 1],\r\n  [0, 1],\r\n  [-1, 1],\r\n  [-1, 0],\r\n  [-1, -1],\r\n  [0, -1],\r\n  [1, -1],\r\n];\r\n\r\n// Get number of ALIVE neighbours for point (x,y)\r\nfunction getneighcount(arr, x, y) {\r\n  var nc = 0;\r\n  for (var nn = 0; nn < neighbourhood.length; nn++) {\r\n    var dx = neighbourhood[nn][0];\r\n    var dy = neighbourhood[nn][1];\r\n    if (arr[pbcz(x + dx, arr.length)][pbcz(y + dy, arr[x].length)] === ALIVE) {\r\n      nc++;\r\n    }\r\n  }\r\n  return nc;\r\n}\r\n\r\n// Periodic boundary conditions in z-direction:\r\nfunction pbcz(iz, Lz) {\r\n  if (iz >= Lz) {\r\n    iz = iz - Lz;\r\n  }\r\n  if (iz < 0) {\r\n    iz = iz + Lz;\r\n  }\r\n  return iz;\r\n}\n")),"\n",a.createElement(n.p,null,"Then we can just turn the Game of Life rules into some simple JavaScript code:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-javascript"},"var ALIVE = 1;\r\nvar DEAD = 0;\r\nvar N = 200;\r\nvar arr = create2Darray(N, N, DEAD); // Iitialises a new 2D array with array values set to 0.\r\nvar requestId;\r\ngameLoop();\r\n\r\n// Runs forever, call cancelAnimationFrame(requestId) to stop.\r\nfunction gameLoop() {\r\n  arr = iterate(arr);\r\n  print_to_canvas(arr);\r\n  requestId = requestAnimationFrame(gameLoop);\r\n}\r\n\r\n// Iterate the next state of the array.\r\nfunction iterate(oldArray) {\r\n  var newArray = clone2Darray(oldArray);\r\n  for (var x = 0; x < oldArray.length; x++) {\r\n    for (var y = 0; y < oldArray[0].length; y++) {\r\n      var aliveNeighbourCount = getneighcount(oldArray, x, y);\r\n      if (oldArray[x][y] === ALIVE) {\r\n        if (aliveNeighbourCount < 2) {\r\n          newArray[x][y] = DEAD; // Underpopulation kills cell.\r\n        } else if (aliveNeighbourCount === 2 || aliveNeighbourCount === 3) {\r\n          newArray[x][y] = ALIVE; // Surivies!\r\n        } else if (aliveNeighbourCount > 3) {\r\n          newArray[x][y] = DEAD; // Overpopulation kills cell.\r\n        }\r\n      } else if (oldArray[x][y] === DEAD && aliveNeighbourCount === 3) {\r\n        newArray[x][y] = ALIVE; // Reproduction.\r\n      }\r\n    }\r\n  }\r\n  return newArray;\r\n}\n")),"\n",a.createElement(n.p,null,"I've packaged the Game of Life code up into interactive tool below."),"\n",a.createElement(s),"\n",a.createElement(n.p,null,"The full code for this tool is available on my ",a.createElement("a",{href:"https://github.com/george-pearson",class:"blueLink"},"GitHub"),"."))}var u=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,r.ah)(),e.components);return n?a.createElement(n,e,a.createElement(h,e)):h(e)}},270:function(e,n,t){t.r(n),t.d(n,{default:function(){return d}});var r=t(5086),a=t(7294),i=t(7025),o=t(1750),l=t(8013),c=t(5814),s=t(1151),h=t(8977);function u(e){let{data:{mdx:n},children:t}=e;const r={code:l.Z,inlineCode:c.Z},u=n;return a.createElement(i.Z,{page:"Post",post:u},a.createElement("div",{className:h.fI},a.createElement("div",{className:h.v_},a.createElement(o.Z,{post:u}),a.createElement(s.Zo,{components:r},t))))}function d(e){return a.createElement(u,e,a.createElement(r.default,e))}}}]);
//# sourceMappingURL=component---src-templates-post-template-post-template-js-content-file-path-src-pages-posts-2019-04-06-the-game-of-life-index-mdx-89afac1244048219ff34.js.map